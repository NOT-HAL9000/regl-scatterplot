import{c as e,a as t,s as n}from"./utils.29f73a53.js";import{E as o,I as i}from"./vendor.70696f60.js";const a=document.querySelector("#canvas"),r=document.querySelector("#canvas-wrapper"),l=document.querySelector("#num-points"),s=document.querySelector("#num-points-value"),c=document.querySelector("#point-size"),d=document.querySelector("#point-size-value"),u=document.querySelector("#opacity"),v=document.querySelector("#opacity-value"),m=document.querySelector("#click-lasso-initiator"),y=document.querySelector("#reset"),p=document.querySelector("#export"),g=document.querySelector("#example-text-overlay");g.setAttribute("class","active"),g.removeAttribute("href");const h=document.createElement("div");h.id="note",h.textContent="Zoom in to see labels!",r.appendChild(h);const w=document.createElement("canvas");w.id="#text-overlay",w.style.position="absolute",w.style.top=0,w.style.right=0,w.style.bottom=0,w.style.left=0,w.style.pointerEvents="none",r.appendChild(w);const S=()=>{const{width:e,height:t}=r.getBoundingClientRect();w.width=e*window.devicePixelRatio,w.height=t*window.devicePixelRatio,w.style.width=`${e}px`,w.style.height=`${t}px`};S(),window.addEventListener("resize",S);const x=w.getContext("2d");x.font=12*window.devicePixelRatio+"px sans-serif",x.textAlign="center";let f=[],b=1e4,q=4,E=1,L=[];const R=e({canvas:a,lassoMinDelay:10,lassoMinDist:2,pointSize:q,showReticle:!0,reticleColor:[1,1,.878431373,.33],xScale:o().domain([-1,1]),yScale:o().domain([-1,1]),pointColor:"#fff",opacityBy:"density",lassoInitiator:!0});t(R),p.addEventListener("click",(()=>n(R))),console.log(`Scatterplot v${R.get("version")}`),R.subscribe("select",(({points:e})=>{if(console.log("Selected:",e),L=e,1===L.length){const e=f[L[0]];console.log(`X: ${e[0]}\nY: ${e[1]}\nCategory: ${e[2]}\nValue: ${e[3]}`)}})),R.subscribe("deselect",(()=>{L=[]}));R.subscribe("view",(({xScale:e,yScale:t})=>{const n=R.get("pointsInView");n.length<=200?((e,t,n)=>{x.clearRect(0,0,a.width,a.height),x.fillStyle="rgb(255, 255, 255)";for(let o=0;o<e.length;o++)x.fillText(e[o],t(f[e[o]][0])*window.devicePixelRatio,n(f[e[o]][1])*window.devicePixelRatio-12*1.2*window.devicePixelRatio)})(n,e,t):x.clearRect(0,0,a.width,a.height)}));const C=e=>{var t;b=e,l.value=b,s.innerHTML=b,t=b,f=Array.from({length:t},(()=>[2*Math.random()-1,2*Math.random()-1])),R.draw(f)};l.addEventListener("input",(e=>{s.innerHTML=+e.target.value+" <em>release to redraw</em>"}));l.addEventListener("change",(e=>C(+e.target.value)));const M=e=>{const t=i().domain([1,10]).range([e,10*e]);return Array(100).fill().map(((e,n)=>t(1+n/99*9)))},$=e=>{q=e,c.value=q,d.innerHTML=q,R.set({pointSize:M(q)})};c.addEventListener("input",(e=>$(+e.target.value)));const A=e=>{var t;E=e,u.value=E,v.innerHTML=E,R.set({opacity:(t=E,Array(10).fill().map(((e,n)=>(n+1)/10*t)))})};u.addEventListener("input",(e=>A(+e.target.value)));m.addEventListener("change",(e=>{R.set({lassoInitiator:e.target.checked})})),m.checked=R.get("lassoInitiator");y.addEventListener("click",(()=>{R.reset()})),$(q),A(E),C(b);
